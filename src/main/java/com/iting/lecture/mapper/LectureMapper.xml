<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iting.lecture.mapper.LectureMapper">

	<!-- 수강상세 -->
	<select id="getLectureInfo" resultType="LectureVO">
		SELECT LT_NUM
		       , LT_ST_CD
		       , LT_TTL
		       , LT_IMG
		       , LT_INTRO
		       , LT_CATE_CD
		       , FR_DT
		       , LT_DIF_CD
		       , LECTURER_NUM
		       , LT_KEYWORD_CD
		       , LT_FG_CD
		FROM LT
		WHERE LT_NUM = #{ltNum}
	</select>
	<!-- 강의 목록 -->
	<select id="getLectureList" resultType="LectureVO">
		SELECT LT_NUM
		       , LT_ST_CD
		       , LT_TTL
		       , LT_IMG
		       , LT_INTRO
		       , LT_CATE_CD
		       , FR_DT
		       , LT_DIF_CD
		       , LECTURER_NUM
		       , LT_KEYWORD_CD
		       , LT_FG_CD
		FROM LT
	
	</select>
	<!-- 강의 상세 -->
	<select id="getLectureInfo1" resultType="LectureVO">
		SELECT LT_NUM
		       , LT_ST_CD
		       , LT_TTL
		       , LT_IMG
		       , LT_INTRO
		       , LT_CATE_CD
		       , FR_DT
		       , LT_DIF_CD
		       , LECTURER_NUM
		       , LT_KEYWORD_CD
		       , LT_FG_CD
		FROM LT
		WHERE LT_NUM = #{ltNum}
		</select>
		
		<!-- 강의 등록 -->
		<insert id="Ltinsert" parameterType="CnqVO">
		<selectKey keyProperty="ltNum"
					order="BEFORE"
					resultType="string">
			SELECT 'lt' || LPAD(NVL(MAX(SUBSTR(LT_CNQ_NUM, -5)), 0) + 1, 5, '0') AS LT_NUM 
			FROM LT
		</selectKey>
		INSERT INTO LT(
					   LT_NUM
					  ,LT_TTL
					  ,LT_INTRO
					  ,FR_DT
					  ,LT_DIF_CD
					  ,LT_IMG
						)
		VALUES(
			   #{ltNum}
			   ,#{ltTtl}
			   ,#{ltIntro}
			   ,#{frDt}
			   ,#{ltDifCd}
			   ,#{ltImg}
			   )
		
		</insert>
</mapper>