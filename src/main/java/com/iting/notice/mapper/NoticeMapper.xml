<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iting.notice.mapper.NoticeMapper">
	<select id="getNoticeList" resultType="NoticeVO">
    <![CDATA[
    select * from (
        select ROWNUM as rn, a.* from (
            SELECT
                NOTICE_NUM,
                TTL,
                CNTN,
                REG_DT,
                NOTICE_TYP_CD,
                FIX_FR_DT,
                FIX_TO_DT,
                PRI_NOTICE_CD,
                ATCH_NUM
            FROM notice
            <if test="vo.ttl != null and vo.ttl != ''">
                AND TTL like '%' || #{vo.ttl} || '%'
            </if>
            <if test="vo.cntn != null and vo.cntn != ''">
                AND CNTN like '%' || #{vo.cntn} || '%'
            </if>
            ORDER by NOTICE_NUM DESC
        ) a
        where ROWNUM <= #{svo.end}
    ) b where rn >= #{svo.start}
    ]]>
	</select>

	<!-- 게시글 페이징 위한 개수 조회 -->
	<select id="getCount" resultType="Long">
    <![CDATA[
    select count(*)
    FROM notice
    WHERE 1 = 1
    <if test="vo.ttl != null and vo.ttl != ''">
        AND TTL like '%' || #{vo.ttl} || '%'
    </if>
    <if test="vo.cntn != null and vo.cntn != ''">
        AND CNTN like '%' || #{vo.cntn} || '%'
    </if>
    ]]>
	</select>

</mapper>