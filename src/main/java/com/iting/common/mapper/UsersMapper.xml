<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.iting.common.mapper.UsersMapper">
	<select id="getUserInfo" parameterType="string"
		resultType="UsersVO">
		select m.mem_num AS num_cd
            ,m.id
            ,'{noop}' || m.pw AS pw
            ,'ROLE_' || upper(m.mem_fg_cd) AS user_cd
        from mem m
        where id = #{userid}
        UNION
        select l.lecturer_num AS num_cd
            ,l.id
            ,'{noop}' || l.pw AS pw
            ,'ROLE_' || upper(l.accp_yn_cd) AS user_cd
        from lecturer l
        where id = #{userid}
	</select>
	<insert id="insertUser">
		insert into 
		mem
		(
		id
		, pw
		, name
		, addr
		, detailaddr
		, mail
		, phone
		, join_dt
		, login_typ_cd
		, token
		
		)
		values(
				#{id}
				, #{pw}
				, #{name}
				, #{addr}
				, #{detailAddr}
				, #{mail}
				, #{phone}
				, sysdate
				, #{loginTypCd}
				, #{token}
				
				)
	</insert>
</mapper>